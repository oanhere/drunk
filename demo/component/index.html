<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="initial-scale=1,user-scalable=no" />
        <title>drunk.Component - demo</title>
        <script src="../../build/drunk.js"></script>
        
        <style>
            .hide {display: none;}
            .strike {text-decoration: line-through;}
        </style>
    </head>
    
    <body>
        
        <button drunk-on="click: alertview1Visible = !alertview1Visible">
            {{ alertview1Visible ? 'hide' : 'show' }} alerv-view 
        </button>
        
        <p>
            <input type="text" placeholder="输入任务并按回车添加" drunk-model="content" drunk-on='keyup: $event.keyCode === 13 && addTodo()'/>
        </p>
        
        <todo-item drunk-repeat="todo,index in todoList" content="{{todo.title}}" index="{{index}}" completed="{{todo.completed}}" on-remove="todoList.splice(index, 1)">
        </todo-item>
        
        <alert-view src="./alert.html"
            title="Title 1"
            content="This is alert content 1"
            two-way="visible"
            visible="{{alertview1Visible}}">
        </alert-view>
        
        <script type='text/tpl' id="todo-item">
            <button drunk-on="click: $emit('remove', index)">删除</button>
            <button drunk-on="click: completed = !completed">{{completed ? '取消' : '完成'}}</button>
            <p drunk-class="{strike: completed}">
                {{content}}
            </p>
            <span drunk-repeat="n in 2">{{n}}</span>
        </script>
        
        <script>
            
            drunk.Component.define('todo-item', {   
                templateUrl: 'todo-item'
            });
            
            var TodoApp = drunk.Component.extend({
                
                init: function () {
                    this.todoList = [];
                },
                
                handlers: {
                    
                    addTodo: function () {
                        if (!this.content) {
                            return;
                        }
                        
                        this.todoList.unshift({
                            title: this.content,
                            completed: false
                        });
                        
                        this.content = '';
                    },
                }
            });
            
            drunk.config.debug = true;
            
            var app = new TodoApp();
            
            app.$mount(document.body);
        </script>
    </body>
</html>